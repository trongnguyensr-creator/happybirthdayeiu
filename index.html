<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Happy Birthday, My Love ♡</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap');
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}
html, body{
  height:100%;
  font-family:'Quicksand',Arial,Helvetica,sans-serif;
  color:#222;
  overflow:hidden;
  background:radial-gradient(
    circle at 40% 30%,
    #fff7fa 0%,
    #ffe4ee 25%,
    #ffc1d6 50%,
    #ff9fbe 72%,
    #ff7aa8 100%
  );
  position:relative;
}
/* ===== FLOATING GLOW ===== */
.floating-glow{
  position:absolute;
  background:radial-gradient(
    circle at 40% 40%,
    rgba(255,255,255,0.95) 0%,
    rgba(255,220,235,0.75) 25%,
    rgba(255,180,210,0.55) 50%,
    rgba(255,160,200,0.35) 70%,
    transparent 90%
  );
  border-radius:50%;
  pointer-events:none;
  animation:floatGlow 34s ease-in-out infinite;
  will-change:transform,opacity;
  filter:blur(30px);
  mix-blend-mode:screen;
  z-index:1;
}
@keyframes floatGlow{
  0% {transform:translate(-50%,-50%) scale(0.7) rotate(0deg);opacity:0.35;}
  25% {transform:translate(-50%,-50%) scale(1.3) rotate(90deg);opacity:0.8;}
  50% {transform:translate(-50%,-50%) scale(1.8) rotate(180deg);opacity:1;}
  75% {transform:translate(-50%,-50%) scale(1.3) rotate(270deg);opacity:0.8;}
  100% {transform:translate(-50%,-50%) scale(0.7) rotate(360deg);opacity:0.35;}
}
.floating-glow:nth-child(1){--size:380px;left:10%;top:14%;animation-duration:40s;}
.floating-glow:nth-child(2){--size:460px;left:90%;top:20%;animation-duration:48s;}
.floating-glow:nth-child(3){--size:320px;left:35%;top:82%;animation-duration:30s;}
.floating-glow:nth-child(4){--size:520px;left:96%;top:6%; animation-duration:54s;}
.floating-glow:nth-child(5){--size:360px;left:6%; top:94%;animation-duration:36s;}
.floating-glow:nth-child(6){--size:420px;left:72%;top:62%;animation-duration:46s;}
.floating-glow:nth-child(7){--size:340px;left:55%;top:48%;animation-duration:32s;}
.floating-glow:nth-child(8){--size:400px;left:18%;top:70%;animation-duration:42s;}
.floating-glow{width:var(--size);height:var(--size);}
/* ===== SCENES ===== */
.scene{
  position:absolute;
  inset:0;
  transition:opacity 1.8s ease-in-out;
  z-index:2;
  display:flex;
  align-items:center;
  justify-content:center;
}
#scene1 { opacity: 1; }
#scene2 { opacity: 0; }
/* ===== GLASS CARD ===== */
.glass{
  background:rgba(255,255,255,0.38);
  backdrop-filter:blur(24px);
  -webkit-backdrop-filter:blur(24px);
  border:2px solid rgba(255,255,255,0.55);
  border-radius:34px;
  padding:55px 65px;
  box-shadow:0 22px 65px rgba(0,0,0,0.18);
  text-align:center;
  color:#111;
  max-width:90%;
}
/* ===== COUNTDOWN ===== */
#countdown{
  font-weight:700;
  font-size:4.6rem;
  letter-spacing:12px;
  margin-bottom:25px;
  color:#fff;
  text-shadow:0 0 12px #ff9fc4, 0 0 28px #ffc1d6, 0 0 48px #ffe4ee;
  display:flex;
  align-items:center;
  gap:16px;
  justify-content:center;
}
.time-unit{
  min-width:120px;
  background:rgba(255,255,255,0.28);
  border-radius:20px;
  padding:14px 0;
  backdrop-filter:blur(12px);
  animation:pulseSoft 3.2s infinite ease-in-out;
}
@keyframes pulseSoft{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.06);}
}
/* ===== DATE ===== */
#date{
  font-size:2.4rem;
  font-weight:600;
  color:#fff;
  letter-spacing:6px;
  margin-top:18px;
  text-shadow:0 0 18px #ff9fc4, 0 0 36px #ffd1e2;
}
.date-glow{
  animation:dateMagic 1.6s ease-in-out;
}
@keyframes dateMagic{
  0% {transform:scale(1);opacity:1;text-shadow:0 0 32px #ffb3d1;}
  50% {transform:scale(1.35);opacity:0.35;text-shadow:0 0 80px #ffe4ee;}
  100% {transform:scale(1);opacity:1;text-shadow:0 0 32px #ffb3d1;}
}
/* ===== START BUTTON OVERLAY ===== */
#startOverlay {
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.18);
  backdrop-filter: blur(12px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  opacity: 0;
  transition: opacity 1.2s ease;
  pointer-events: none;
}
#startOverlay.active {
  opacity: 1;
  pointer-events: all;
}
#startButton {
  padding: 22px 68px;
  font-size: 2.5rem;
  font-weight: 700;
  color: white;
  background: linear-gradient(135deg, #ff7aa8, #ff9fbe, #ffc1d6);
  border: none;
  border-radius: 60px;
  box-shadow: 0 12px 40px rgba(255,122,168,0.55);
  cursor: pointer;
  transition: all 0.4s ease;
  text-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
#startButton:hover {
  transform: translateY(-8px) scale(1.08);
  box-shadow: 0 18px 55px rgba(255,122,168,0.7);
}
/* ===== TIMELINE ===== */
#timeline{
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  padding:10vh 10px;
  gap:80px;
  overflow-y:auto;
  opacity:0;
  transition:opacity 1.5s ease;
  width: 100%;
}
.timeline-card{
  width:95%;
  max-width:540px;
  background:rgba(255,255,255,0.96);
  border:1px solid rgba(255,160,200,0.55);
  border-radius:36px;
  padding:40px 30px;
  box-shadow:0 16px 50px rgba(0,0,0,0.18);
  opacity:0;
  transform:translateY(90px);
  transition:opacity .9s ease, transform .9s ease;
  color:#222;
}
.timeline-card.visible{
  opacity:1;
  transform:translateY(0);
}
.timeline-card.fade-out{
  opacity:0;
  transform:translateY(-70px);
}
.timeline-card img{
  width:100%;
  border-radius:22px;
  margin-bottom:35px;
  box-shadow:0 8px 25px rgba(0,0,0,0.12);
}
.timeline-card h3{
  font-size:2.4rem;
  font-weight:700;
  color:#d81b60;
  margin-bottom:22px;
}
.timeline-card .memory-text{
  font-size:1.4rem;
  line-height:1.75;
  color:#333;
}
/* ===== MOBILE OPTIMIZATIONS ===== */
@media(max-width:768px){
  html, body {
    overflow-y: auto; /* Allow scrolling on mobile if needed */
  }
  .glass {
    padding: 35px 45px;
    border-radius: 28px;
  }
  #countdown {
    font-size: 3.3rem;
    letter-spacing: 8px;
    gap: 12px;
  }
  .time-unit {
    min-width: 90px;
    padding: 10px 0;
    border-radius: 16px;
  }
  #date {
    font-size: 2rem;
    letter-spacing: 4px;
  }
  #timeline {
    padding: 5vh 5px;
    gap: 60px;
  }
  .timeline-card {
    width: 98%;
    padding: 30px 20px;
    border-radius: 28px;
  }
  .timeline-card h3 {
    font-size: 2rem;
    margin-bottom: 18px;
  }
  .timeline-card .memory-text {
    font-size: 1.2rem;
    line-height: 1.6;
  }
  .timeline-card img {
    border-radius: 18px;
    margin-bottom: 25px;
  }
  #startButton {
    font-size: 2rem;
    padding: 18px 50px;
    border-radius: 50px;
  }
  .floating-glow {
    filter: blur(20px); /* Reduce blur for performance on mobile */
  }
  .floating-glow:nth-child(1){--size:280px;}
  .floating-glow:nth-child(2){--size:360px;}
  .floating-glow:nth-child(3){--size:220px;}
  .floating-glow:nth-child(4){--size:420px;}
  .floating-glow:nth-child(5){--size:260px;}
  .floating-glow:nth-child(6){--size:320px;}
  .floating-glow:nth-child(7){--size:240px;}
  .floating-glow:nth-child(8){--size:300px;}
}
/* Sparkle effect */
.sparkle {
  position: absolute;
  width: 8px;
  height: 8px;
  background: white;
  border-radius: 50%;
  pointer-events: none;
  animation: sparkleAnim 1.4s ease-out forwards;
  box-shadow: 0 0 10px white, 0 0 20px #ff9fc4;
}
@keyframes sparkleAnim {
  0% { transform: translate(0,0) scale(0); opacity: 1; }
  50% { transform: translate(var(--x), var(--y)) scale(1.8); opacity: 0.9; }
  100% { transform: translate(calc(var(--x)*1.6), calc(var(--y)*1.6)) scale(0); opacity: 0; }
}
</style>
</head>
<body>
<!-- Floating glows -->
<div class="floating-glow"></div>
<div class="floating-glow"></div>
<div class="floating-glow"></div>
<div class="floating-glow"></div>
<div class="floating-glow"></div>
<div class="floating-glow"></div>
<div class="floating-glow"></div>
<div class="floating-glow"></div>

<!-- Music -->
<audio id="music" src="hpbd.mp3" loop preload="auto"></audio>

<div id="scene1" class="scene">
  <div class="glass">
    <div id="countdown">
      <span class="time-unit" id="hh">23</span>:
      <span class="time-unit" id="mm">59</span>:
      <span class="time-unit" id="ss">55</span>
    </div>
    <div id="date">12/02/2026</div>
  </div>
</div>

<div id="scene2" class="scene">
  <!-- Overlay + Nút bắt đầu -->
  <div id="startOverlay">
    <button id="startButton">Bắt Đầu ♡</button>
  </div>

  <!-- Timeline -->
  <div id="timeline">
    <div class="timeline-card">
      <img src="first_meet.jpg" alt="Ngày đầu gặp">
      <h3>Ngày Đầu Gặp</h3>
      <div class="memory-text" data-original="Lần đầu ánh mắt chạm nhau, tim mình đã biết... đây chính là người mình tìm kiếm bao lâu nay.">Lần đầu ánh mắt chạm nhau, tim mình đã biết... đây chính là người mình tìm kiếm bao lâu nay.</div>
    </div>
    <div class="timeline-card">
      <img src="first_date.jpg" alt="Buổi hẹn đầu">
      <h3>Buổi Hẹn Đầu Tiên</h3>
      <div class="memory-text" data-original="Cả thế giới như ngừng trôi, chỉ còn lại nụ cười và ánh mắt của em.">Cả thế giới như ngừng trôi, chỉ còn lại nụ cười và ánh mắt của em.</div>
    </div>
    <div class="timeline-card">
      <img src="anniversary.jpg" alt="Kỷ niệm">
      <h3>Kỷ Niệm Đẹp</h3>
      <div class="memory-text" data-original="Mỗi ngày bên em đều là một kỷ niệm đáng nhớ nhất trong đời anh.">Mỗi ngày bên em đều là một kỷ niệm đáng nhớ nhất trong đời anh.</div>
    </div>
    <div class="timeline-card">
      <img src="future.jpg" alt="Tương lai">
      <h3>Tương Lai Của Chúng Ta</h3>
      <div class="memory-text" data-original="Còn rất nhiều ngày đẹp trời đang chờ chúng mình cùng nhau viết tiếp...">Còn rất nhiều ngày đẹp trời đang chờ chúng mình cùng nhau viết tiếp...</div>
    </div>
  </div>
</div>

<script>
// Music
const audio = document.getElementById('music');
audio.volume = 0.4;

// Countdown elements
const hh = document.getElementById('hh');
const mm = document.getElementById('mm');
const ss = document.getElementById('ss');
const dateEl = document.getElementById('date');

let h = 23, m = 59, s = 55;

function pad(n) { return n < 10 ? '0' + n : n; }

function updateDisplay() {
  hh.textContent = pad(h);
  mm.textContent = pad(m);
  ss.textContent = pad(s);
}

function createSparkle(x, y) {
  const sp = document.createElement('div');
  sp.className = 'sparkle';
  sp.style.left = x + 'px';
  sp.style.top = y + 'px';
  sp.style.setProperty('--x', (Math.random()*140 - 70) + 'px');
  sp.style.setProperty('--y', (Math.random()*140 - 70) + 'px');
  document.body.appendChild(sp);
  setTimeout(() => sp.remove(), 1400);
}

function nextSecond() {
  s++;
  if (s >= 60) { s = 0; m++; if (m >= 60) { m = 0; h++; } }
  updateDisplay();

  if (h === 23 && m === 59 && s === 59) {
    dateEl.classList.add('date-glow');
    dateEl.textContent = '13/02/2026';

    const rect = dateEl.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;

    for(let i = 0; i < 20; i++) {
      setTimeout(() => createSparkle(cx, cy), i * 50);
    }

    setTimeout(() => {
      document.getElementById('scene1').style.opacity = '0';

      setTimeout(() => {
        document.getElementById('scene2').style.opacity = '1';
        
        // Hiện nút bắt đầu
        setTimeout(() => {
          document.getElementById('startOverlay').classList.add('active');
        }, 1200);
      }, 1600);
    }, 2800);

    clearInterval(timer);
  }
}

updateDisplay();
const timer = setInterval(nextSecond, 1000);

// Typewriter effect
function typeWriter(element, text, speed = 28) {
  element.innerHTML = '';
  let i = 0;
  function type() {
    if (i < text.length) {
      element.innerHTML += text.charAt(i);
      i++;
      setTimeout(type, speed);
    }
  }
  type();
}

// Timeline auto scroll
const cards = document.querySelectorAll('.timeline-card');
const SHOW_TIME = 3800;
const FADE_TIME = 2200;
const SCROLL_DURATION = 2000;
let autoScrollInterval = null;
let isUserScrolling = false;

function scrollToCard(index) {
  const card = cards[index];
  card.classList.remove('fade-out');
  card.classList.add('visible');
  const memoryText = card.querySelector('.memory-text');
  if (memoryText) {
    const text = memoryText.dataset.original;
    typeWriter(memoryText, text, 28);
  }
  card.scrollIntoView({
    behavior: 'smooth',
    block: 'center',
    inline: 'center'
  });
}

function startAutoScroll() {
  let currentIndex = 0;
  autoScrollInterval = setInterval(() => {
    if (isUserScrolling) return;
    const currentCard = cards[currentIndex];
    currentCard.classList.add('fade-out');
    setTimeout(() => {
      currentCard.classList.remove('visible');
      currentCard.classList.remove('fade-out');
      currentIndex = (currentIndex + 1) % cards.length;
      scrollToCard(currentIndex);
    }, FADE_TIME);
  }, SHOW_TIME + FADE_TIME + SCROLL_DURATION);
}

// User interaction detection
const scene2 = document.getElementById('scene2');
scene2.addEventListener('wheel', () => { isUserScrolling = true; resetUserScrollTimer(); });
scene2.addEventListener('touchmove', () => { isUserScrolling = true; resetUserScrollTimer(); });

function resetUserScrollTimer() {
  clearTimeout(window.userScrollTimer);
  window.userScrollTimer = setTimeout(() => { isUserScrolling = false; }, 35000);
}

// Start button handler
document.getElementById('startButton').addEventListener('click', function() {
  // Play music
  audio.play().then(() => {
    console.log("Nhạc đã được bật ✓");
  }).catch(e => {
    console.log("Cần thêm tương tác để bật nhạc trên trình duyệt này");
  });

  // Hide overlay
  document.getElementById('startOverlay').style.opacity = '0';
  setTimeout(() => {
    document.getElementById('startOverlay').style.display = 'none';
  }, 1200);

  // Show timeline
  document.getElementById('timeline').style.opacity = '1';

  // Start auto scroll
  setTimeout(() => {
    scrollToCard(0);
    startAutoScroll();
  }, 800);
});
</script>
</body>
</html>
