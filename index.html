<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>Happy Birthday, My Love ‚ô°</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Preload ·∫£nh quan tr·ªçng -->
  <link rel="preload" href="first_meet.jpg" as="image">
  <link rel="preload" href="first_date.jpg" as="image">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      font-family: 'Quicksand', system-ui, -apple-system, sans-serif;
      color: #222;
      overflow: hidden;
      background: linear-gradient(135deg, #fff0f5, #ff9fbe, #ff6b98, #ffb8d1);
      background-size: 200% 200%;
      animation: bgFlow 20s ease-in-out infinite;
      touch-action: manipulation;
      /* iOS safe area */
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    @keyframes bgFlow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Floating glow - nh·∫π h∆°n tr√™n mobile */
    .floating-glow {
      position: absolute;
      background: radial-gradient(circle at 40% 40%, rgba(255,255,255,0.75) 0%, rgba(255,200,220,0.45) 50%, transparent 80%);
      border-radius: 50%;
      pointer-events: none;
      filter: blur(18px);
      mix-blend-mode: screen;
      z-index: 1;
      opacity: 0.7;
    }

    @media (max-width: 768px) {
      .floating-glow { filter: blur(14px); opacity: 0.6; }
    }

    /* Scene */
    .scene {
      position: absolute;
      inset: 0;
      transition: opacity 0.7s ease-out;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: max(20px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right)) max(20px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left));
      gap: 24px;
    }

    /* Glass card */
    .glass {
      background: rgba(255,255,255,0.48);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.55);
      border-radius: 24px;
      padding: 40px 28px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.16);
      text-align: center;
      max-width: 92%;
      width: 100%;
      max-height: none;
      overflow: visible;
    }

    /* Start button */
    .start-btn {
      background: linear-gradient(135deg, #ff6b98, #ff9fbe);
      color: white;
      border: none;
      border-radius: 50px;
      padding: 18px 48px;
      font-size: clamp(1.3rem, 4.5vw, 1.8rem);
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 8px 25px rgba(255,107,152,0.4);
      transition: all 0.3s ease;
      display: none;
      font-family: 'Quicksand', sans-serif;
      letter-spacing: 1px;
      text-transform: uppercase;
      -webkit-tap-highlight-color: transparent;
      margin-top: 20px;
    }

    .start-btn.show {
      display: inline-block;
      animation: btnAppear 0.6s ease-out forwards;
    }

    .start-btn:active {
      transform: scale(0.95);
      box-shadow: 0 4px 15px rgba(255,107,152,0.3);
    }

    @keyframes btnAppear {
      0% { 
        opacity: 0; 
        transform: translateY(20px) scale(0.9); 
      }
      100% { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
      }
    }

    /* Countdown */
    #countdown {
      font-weight: 700;
      font-size: clamp(2.8rem, 9vw, 4.4rem);
      letter-spacing: 8px;
      margin-bottom: 20px;
      color: white;
      text-shadow: 0 0 16px #ff9fc4;
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .time-unit {
      min-width: 78px;
      background: rgba(255,255,255,0.32);
      border-radius: 14px;
      padding: 10px 0;
      backdrop-filter: blur(8px);
    }

    #date {
      font-size: clamp(1.6rem, 5vw, 2.2rem);
      color: white;
      text-shadow: 0 0 12px #ffb3d1;
    }

    /* Timeline */
    #timeline {
      width: 100%;
      height: 100%;
      padding: max(4vh, env(safe-area-inset-top) + 20px) 12px max(4vh, env(safe-area-inset-bottom) + 20px) 12px;
      overflow-y: auto;
      scroll-behavior: smooth;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5vh;
      -webkit-overflow-scrolling: touch;
    }

    .timeline-card {
      width: 94%;
      max-width: 520px;
      background: rgba(255,255,255,0.94);
      border-radius: 28px;
      padding: 40px 28px;
      box-shadow: 0 10px 35px rgba(0,0,0,0.14);
      opacity: 0;
      transform: translateY(50px);
      transition: all 0.8s ease-out;
    }

    .timeline-card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .timeline-card img {
      width: 100%;
      border-radius: 18px;
      margin-bottom: 24px;
      display: block;
    }

    .timeline-card h3 {
      font-size: clamp(1.8rem, 5.2vw, 2.3rem);
      color: #d81b60;
      margin-bottom: 16px;
    }

    .memory-text {
      font-size: clamp(1.1rem, 3.8vw, 1.35rem);
      line-height: 1.65;
      color: #333;
    }

    /* Sparkle - nh·∫π h∆°n */
    .sparkle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      pointer-events: none;
      animation: sparkleAnim 1.1s ease-out forwards;
      box-shadow: 0 0 10px white;
    }

    @keyframes sparkleAnim {
      0% { transform: scale(0); opacity: 1; }
      50% { transform: scale(1.7); opacity: 0.9; }
      100% { transform: scale(0); opacity: 0; }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    #startOverlay {
      transition: opacity 0.5s ease-out;
    }

    /* T√¥n tr·ªçng thi·∫øt l·∫≠p gi·∫£m chuy·ªÉn ƒë·ªông */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Mobile tinh ch·ªânh */
    @media (max-width: 768px) {
      .glass { padding: 32px 22px; border-radius: 20px; }
      #countdown { font-size: clamp(2.4rem, 8vw, 3.6rem); letter-spacing: 6px; }
      .time-unit { min-width: 68px; font-size: 1.3rem; }
      #timeline { padding: max(3vh, env(safe-area-inset-top) + 15px) 10px max(3vh, env(safe-area-inset-bottom) + 15px) 10px; gap: 4.5vh; }
      .timeline-card { padding: 32px 22px; }
      .start-btn { padding: 16px 40px; font-size: clamp(1.2rem, 4vw, 1.6rem); }
    }

    /* H·ªó tr·ª£ landscape tr√™n mobile */
    @media (max-width: 768px) and (orientation: landscape) {
      .glass { max-width: 70%; padding: 24px 20px; }
      #countdown { font-size: clamp(2rem, 6vw, 2.8rem); }
      .start-btn { padding: 14px 36px; margin-top: 12px; }
    }
  </style>
</head>
<body>

<!-- Floating glow (gi·∫£m c√≤n 4-5 ƒë·ªÉ nh·∫π h∆°n) -->
<div class="floating-glow" style="width:340px;height:340px;left:8%;top:12%;animation-duration:34s;"></div>
<div class="floating-glow" style="width:420px;height:420px;left:88%;top:18%;animation-duration:40s;"></div>
<div class="floating-glow" style="width:280px;height:280px;left:35%;top:78%;animation-duration:28s;"></div>

<audio id="music" src="hpbd.mp3" loop preload="auto"></audio>

<!-- Overlay y√™u c·∫ßu ch·∫°m (cho iOS) -->
<div id="startOverlay" style="display:none;"></div>

<div id="scene1" class="scene">
  <div class="glass">
    <div id="countdown">
      <span class="time-unit" id="hh">23</span>:
      <span class="time-unit" id="mm">59</span>:
      <span class="time-unit" id="ss">55</span>
    </div>
    <div id="date">12/02/2026</div>
  </div>
  <button id="startBtn" class="start-btn">üéµ B·∫Øt ƒê·∫ßu</button>
</div>

<div id="scene2" class="scene" style="opacity:0">
  <div id="timeline">
    <div class="timeline-card">
      <img src="first_meet.jpg" alt="Ng√†y ƒë·∫ßu g·∫∑p" loading="lazy">
      <h3>Ng√†y ƒê·∫ßu G·∫∑p</h3>
      <div class="memory-text" data-original="L·∫ßn ƒë·∫ßu √°nh m·∫Øt ch·∫°m nhau, tim m√¨nh ƒë√£ bi·∫øt... ƒë√¢y ch√≠nh l√† ng∆∞·ªùi m√¨nh t√¨m ki·∫øm bao l√¢u nay."></div>
    </div>
    <div class="timeline-card">
      <img src="first_date.jpg" alt="Bu·ªïi h·∫πn ƒë·∫ßu" loading="lazy">
      <h3>Bu·ªïi H·∫πn ƒê·∫ßu Ti√™n</h3>
      <div class="memory-text" data-original="C·∫£ th·∫ø gi·ªõi nh∆∞ ng·ª´ng tr√¥i, ch·ªâ c√≤n l·∫°i n·ª• c∆∞·ªùi v√† √°nh m·∫Øt c·ªßa em."></div>
    </div>
    <div class="timeline-card">
      <img src="anniversary.jpg" alt="K·ª∑ ni·ªám" loading="lazy">
      <h3>K·ª∑ Ni·ªám ƒê·∫πp</h3>
      <div class="memory-text" data-original="M·ªói ng√†y b√™n em ƒë·ªÅu l√† m·ªôt k·ª∑ ni·ªám ƒë√°ng nh·ªõ nh·∫•t trong ƒë·ªùi anh."></div>
    </div>
    <div class="timeline-card">
      <img src="future.jpg" alt="T∆∞∆°ng lai" loading="lazy">
      <h3>T∆∞∆°ng Lai C·ªßa Ch√∫ng Ta</h3>
      <div class="memory-text" data-original="C√≤n r·∫•t nhi·ªÅu ng√†y ƒë·∫πp tr·ªùi ƒëang ch·ªù ch√∫ng m√¨nh c√πng nhau vi·∫øt ti·∫øp..."></div>
    </div>
  </div>
</div>

<script>
// X√≥a overlay ban ƒë·∫ßu
const overlay = document.getElementById('startOverlay');
if (overlay) overlay.remove();

// Elements
const audio = document.getElementById('music');
const startBtn = document.getElementById('startBtn');
const scene1 = document.getElementById('scene1');
const scene2 = document.getElementById('scene2');

// Countdown
const hh = document.getElementById('hh');
const mm = document.getElementById('mm');
const ss = document.getElementById('ss');
const dateEl = document.getElementById('date');

let h = 23, m = 59, s = 55;

function pad(n) { return n < 10 ? '0' + n : n; }

function updateDisplay() {
  hh.textContent = pad(h);
  mm.textContent = pad(m);
  ss.textContent = pad(s);
}

function createSparkle(x, y) {
  const sp = document.createElement('div');
  sp.className = 'sparkle';
  sp.style.left = x + 'px';
  sp.style.top = y + 'px';
  sp.style.setProperty('--x', (Math.random()*80 - 40) + 'px');
  sp.style.setProperty('--y', (Math.random()*80 - 40) + 'px');
  document.body.appendChild(sp);
  setTimeout(() => sp.remove(), 1100);
}

function nextSecond() {
  s++;
  if (s >= 60) { s = 0; m++; if (m >= 60) { m = 0; h++; } }
  updateDisplay();

  if (h === 23 && m === 59 && s === 59) {
    dateEl.classList.add('date-glow');
    dateEl.textContent = '13/02/2026';

    const rect = dateEl.getBoundingClientRect();
    const cx = rect.left + rect.width / 2;
    const cy = rect.top + rect.height / 2;

    for (let i = 0; i < 8; i++) {
      setTimeout(() => createSparkle(cx, cy), i * 45);
    }

    // Hi·ªán n√∫t B·∫Øt ƒê·∫ßu
    setTimeout(() => {
      startBtn.classList.add('show');
    }, 800);

    clearInterval(timer);
  }
}

updateDisplay();
const timer = setInterval(nextSecond, 1000);

// X·ª≠ l√Ω n√∫t B·∫Øt ƒê·∫ßu
startBtn.addEventListener('click', function() {
  // Ph√°t nh·∫°c
  audio.volume = 0.38;
  audio.play().catch((err) => {
    console.log('L·ªói ph√°t nh·∫°c:', err);
  });

  // ·∫®n n√∫t
  startBtn.style.opacity = '0';
  startBtn.style.transform = 'scale(0.8)';

  // Chuy·ªÉn c·∫£nh
  setTimeout(() => {
    scene1.style.opacity = '0';
    setTimeout(() => {
      scene2.style.opacity = '1';
      setTimeout(() => {
        scrollToCard(0);
        setTimeout(startAutoScroll, 4200);
      }, 700);
    }, 800);
  }, 400);
});

// Typewriter
function typeWriter(el, text, speed = 42) {
  el.innerHTML = '';
  let i = 0;
  function type() {
    if (i < text.length) {
      el.innerHTML += text.charAt(i++);
      setTimeout(type, speed);
    }
  }
  type();
}

// Timeline
const cards = document.querySelectorAll('.timeline-card');
const SHOW_TIME = 7800;
const FADE_TIME = 1400;
let autoScrollInterval = null;
let isUserScrolling = false;

function scrollToCard(index) {
  const card = cards[index];
  card.classList.add('visible');

  const textEl = card.querySelector('.memory-text');
  if (textEl && textEl.dataset.original) {
    typeWriter(textEl, textEl.dataset.original);
  }

  card.scrollIntoView({
    behavior: 'smooth',
    block: 'center',
    inline: 'nearest'
  });
}

function startAutoScroll() {
  let current = 0;
  autoScrollInterval = setInterval(() => {
    if (isUserScrolling) return;

    const currentCard = cards[current];
    currentCard.classList.remove('visible');

    setTimeout(() => {
      current = (current + 1) % cards.length;
      scrollToCard(current);
    }, FADE_TIME);
  }, SHOW_TIME + FADE_TIME);
}

// Ph√°t hi·ªán scroll tay
const timeline = document.getElementById('timeline');
timeline.addEventListener('scroll', () => {
  isUserScrolling = true;
  clearTimeout(window.scrollTimer);
  window.scrollTimer = setTimeout(() => { isUserScrolling = false; }, 18000);
});

timeline.addEventListener('touchmove', () => {
  isUserScrolling = true;
  clearTimeout(window.scrollTimer);
  window.scrollTimer = setTimeout(() => { isUserScrolling = false; }, 18000);
});
</script>
</body>
</html>
